# å•å…ƒæµ‹è¯•å¥—ä»¶ - å·¥ä½œæ€»ç»“

**å®Œæˆæ—¶é—´**: 2025-12-12
**åˆ†æ”¯**: `claude/unified-okx-dex-01TjmxFxGKzkrJdDrBhgxSbF`

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. å•å…ƒæµ‹è¯•æ–‡ä»¶

#### EventBus æµ‹è¯• (`test_event_bus.py`)
- âœ… è®¢é˜…å’Œå‘å¸ƒåŸºæœ¬åŠŸèƒ½
  - éªŒè¯äº‹ä»¶æ­£ç¡®ä¼ é€’åˆ°è®¢é˜…è€…
  - éªŒè¯äº‹ä»¶å†…å®¹å®Œæ•´æ€§
- âœ… å¤šä¸ªè®¢é˜…è€…
  - éªŒè¯æ‰€æœ‰è®¢é˜…è€…éƒ½æ¥æ”¶åˆ°äº‹ä»¶
  - éªŒè¯äº‹ä»¶åˆ†å‘çš„é¡ºåºå’Œå®Œæ•´æ€§
- âœ… äº‹ä»¶ç±»å‹è¿‡æ»¤
  - ä¸åŒäº‹ä»¶ç±»å‹çš„è®¢é˜…è€…äº’ä¸å¹²æ‰°
  - éªŒè¯ MarketDataUpdate å’Œ ArbitrageOpportunityFound çš„è¿‡æ»¤
- âœ… å–æ¶ˆè®¢é˜…
  - éªŒè¯å–æ¶ˆè®¢é˜…åä¸å†æ¥æ”¶äº‹ä»¶
  - éªŒè¯å…¶ä»–è®¢é˜…è€…ä¸å—å½±å“
- âœ… å¤„ç†å™¨å¼‚å¸¸éš”ç¦»
  - éªŒè¯ä¸€ä¸ªå¤„ç†å™¨çš„å¼‚å¸¸ä¸å½±å“å…¶ä»–å¤„ç†å™¨
  - EventBus åº”è¯¥æ•è·å¹¶å¤„ç†å¼‚å¸¸

**æµ‹è¯•ç”¨ä¾‹**: 6ä¸ª
**æ–‡ä»¶**: `tests/unit/test_event_bus.py` (~200 è¡Œ)

#### RiskManager æµ‹è¯• (`test_risk_manager.py`)
- âœ… é£æ§ç®¡ç†å™¨åˆå§‹åŒ–
  - éªŒè¯é»˜è®¤å‚æ•°è®¾ç½®æ­£ç¡®
  - max_position_size, max_daily_loss, max_drawdown_percent
- âœ… ä»“ä½å¤§å°é™åˆ¶
  - éªŒè¯å°äºé™åˆ¶çš„ä»“ä½é€šè¿‡
  - éªŒè¯å¤§äºé™åˆ¶çš„ä»“ä½è¢«æ‹’ç»
- âœ… æ—¥å†…äºæŸé™åˆ¶
  - éªŒè¯æ­£å¸¸èŒƒå›´å†…çš„äºæŸ
  - éªŒè¯è¶…è¿‡é™åˆ¶çš„äºæŸè¯†åˆ«
- âœ… æœ€å¤§å›æ’¤é™åˆ¶
  - è®¡ç®—å…è®¸çš„æœ€å¤§å›æ’¤é‡‘é¢
  - éªŒè¯å›æ’¤æ£€æŸ¥é€»è¾‘
- âœ… å¹¶å‘é£æ§æ£€æŸ¥
  - æ¨¡æ‹Ÿå¤šä¸ªå¹¶å‘é£æ§è¯·æ±‚
  - éªŒè¯æ€»ä»“ä½ä¸è¶…è¿‡é™åˆ¶
- âœ… åŠ¨æ€æ›´æ–°é™åˆ¶
  - éªŒè¯é£æ§å‚æ•°å¯ä»¥åŠ¨æ€è°ƒæ•´
  - éªŒè¯æ›´æ–°åçš„å‚æ•°ç”Ÿæ•ˆ

**æµ‹è¯•ç”¨ä¾‹**: 6ä¸ª
**æ–‡ä»¶**: `tests/unit/test_risk_manager.py` (~140 è¡Œ)

#### ScannerConfig æµ‹è¯• (`test_scanner_config.py`)
- âœ… é»˜è®¤é…ç½®
  - éªŒè¯æ‰€æœ‰é»˜è®¤å€¼ç±»å‹æ­£ç¡®
- âœ… è‡ªå®šä¹‰é…ç½®
  - éªŒè¯è‡ªå®šä¹‰å‚æ•°æ­£ç¡®è®¾ç½®
  - enabled_exchanges, enabled_symbols, min_profit_bps, etc.
- âœ… äº¤æ˜“æ‰€éªŒè¯
  - ç©ºåˆ—è¡¨ã€å•ä¸ªã€å¤šä¸ªäº¤æ˜“æ‰€åœºæ™¯
- âœ… äº¤æ˜“å¯¹éªŒè¯
  - æ ‡å‡†äº¤æ˜“å¯¹æ ¼å¼éªŒè¯
  - äº¤æ˜“å¯¹åç§°æ ¼å¼æ£€æŸ¥
- âœ… åˆ©æ¶¦é˜ˆå€¼é…ç½®
  - æ­£å¸¸ã€è¾ƒé«˜ã€è¾ƒä½é˜ˆå€¼æµ‹è¯•
- âœ… æ›´æ–°é—´éš”é…ç½®
  - å¿«é€Ÿæ›´æ–°ï¼ˆ0.5sï¼‰ã€æ…¢é€Ÿæ›´æ–°ï¼ˆ5sï¼‰
- âœ… ä»“ä½å¤§å°é™åˆ¶
  - å°ä»“ä½ï¼ˆ1000ï¼‰ã€å¤§ä»“ä½ï¼ˆ100000ï¼‰
- âœ… é…ç½®å¤åˆ¶
  - éªŒè¯é…ç½®å¯ä»¥æ­£ç¡®å¤åˆ¶
  - ä¿®æ”¹å‰¯æœ¬ä¸å½±å“åŸå§‹é…ç½®
- âœ… è¾¹ç•Œæƒ…å†µæµ‹è¯•
  - ç©ºåˆ—è¡¨ã€é›¶å€¼ã€è´Ÿå€¼ã€æç«¯å€¼æµ‹è¯•

**æµ‹è¯•ç”¨ä¾‹**: 13ä¸ª
**æ–‡ä»¶**: `tests/unit/test_scanner_config.py` (~200 è¡Œ)

#### ExposureModel æµ‹è¯• (`test_exposure_model.py`)
- âœ… å¤šå¤´æŒä»“
  - éªŒè¯ long position æ•°æ®ç»“æ„
  - éªŒè¯æ­£å‘ç›ˆäºè®¡ç®—
- âœ… ç©ºå¤´æŒä»“
  - éªŒè¯ short position æ•°æ®ç»“æ„
  - éªŒè¯ç©ºå¤´ç›ˆäºï¼ˆä»·æ ¼ä¸‹è·Œæ—¶ç›ˆåˆ©ï¼‰
- âœ… é›¶æŒä»“
  - éªŒè¯ flat position çŠ¶æ€
- âœ… åä¹‰ä»·å€¼è®¡ç®—
  - éªŒè¯ notional = |size| Ã— price
- âœ… ç›ˆäºè®¡ç®—ï¼ˆå¤šå¤´ï¼‰
  - PnL = size Ã— (current_price - entry_price)
- âœ… ç›ˆäºè®¡ç®—ï¼ˆç©ºå¤´ï¼‰
  - PnL = |size| Ã— (entry_price - current_price)
- âœ… å•ä¸ªæŒä»“é£é™©æ•å£
  - éªŒè¯å•ç¬”æŒä»“çš„é£é™©è®¡ç®—
- âœ… åŒä¸€äº¤æ˜“å¯¹å¤šä¸ªæŒä»“
  - éªŒè¯å‡€æ•å£è®¡ç®—
  - éªŒè¯æ€»åä¹‰ä»·å€¼èšåˆ
- âœ… è·¨äº¤æ˜“å¯¹é£é™©æ•å£
  - BTC-USDT å’Œ ETH-USDT çš„æ€»æ•å£
  - éªŒè¯ä¸åŒäº¤æ˜“å¯¹çš„èšåˆ
- âœ… å¯¹å†²æŒä»“
  - éªŒè¯å¤šç©ºå¯¹å†²çš„å‡€æ•å£ä¸ºé›¶
  - éªŒè¯å¥—åˆ©åˆ©æ¶¦è®¡ç®—

**æµ‹è¯•ç”¨ä¾‹**: 12ä¸ª
**æ–‡ä»¶**: `tests/unit/test_exposure_model.py` (~230 è¡Œ)

#### SpreadCalculator æµ‹è¯• (`test_spread_calculator.py`)
- âœ… åŸºæœ¬ä»·å·®è®¡ç®—
  - spread_bps = (sell - buy) / buy Ã— 10000
- âœ… é›¶ä»·å·®
  - buy_price = sell_price â†’ spread = 0
- âœ… è´Ÿä»·å·®
  - buy_price > sell_price â†’ negative spread
- âœ… å¤§ä»·å·®
  - 200 BPS (2%)
- âœ… å°ä»·å·®
  - 1 BPS (0.01%)
- âœ… å°æ•°ç²¾åº¦
  - éªŒè¯æµ®ç‚¹æ•°è®¡ç®—ç²¾åº¦
- âœ… ä¸åŒä»·æ ¼æ°´å¹³
  - ä½ä»·ã€ä¸­ä»·ã€é«˜ä»·çš„ç›¸å¯¹ä»·å·®
- âœ… æç«¯ä»·æ ¼
  - æå°ä»·æ ¼ (0.0001)ã€æå¤§ä»·æ ¼ (1000000)
  - é›¶ä¹°ä»·ï¼ˆé™¤ä»¥é›¶å¤„ç†ï¼‰
  - è´Ÿä»·æ ¼å¤„ç†
- âœ… ç›ˆåˆ©æ€§åˆ¤æ–­
  - å¯ç›ˆåˆ©ä»·å·® (>10 BPS)
  - ä¸å¯ç›ˆåˆ©ä»·å·® (<10 BPS)
  - ä¸´ç•Œä»·å·® (=10 BPS)
- âœ… è€ƒè™‘æ‰‹ç»­è´¹
  - å‡€åˆ©æ¶¦ = ä»·å·® - æ‰‹ç»­è´¹
  - éªŒè¯æ‰£é™¤æ‰‹ç»­è´¹åä»ç›ˆåˆ©

**æµ‹è¯•ç”¨ä¾‹**: 14ä¸ª
**æ–‡ä»¶**: `tests/unit/test_spread_calculator.py` (~240 è¡Œ)

### 2. æµ‹è¯•åŸºç¡€è®¾æ–½

#### æ‰¹é‡æµ‹è¯•è¿è¡Œå™¨ (`run_all_tests.py`)
- âœ… è‡ªåŠ¨æµ‹è¯•å‘ç°ï¼ˆ`unittest.TestLoader`ï¼‰
- âœ… é€’å½’æŸ¥æ‰¾æ‰€æœ‰ `test_*.py` æ–‡ä»¶
- âœ… è¯¦ç»†è¾“å‡ºæ¨¡å¼ï¼ˆ`verbosity=2`ï¼‰
- âœ… æµ‹è¯•ç»“æœæ±‡æ€»
- âœ… é€€å‡ºç è¿”å›ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
- âœ… å¯æ‰§è¡Œæƒé™ï¼ˆ`chmod +x`ï¼‰

**æ–‡ä»¶**: `tests/unit/run_all_tests.py` (~30 è¡Œ)

### 3. æ–‡æ¡£

#### å•å…ƒæµ‹è¯•æŒ‡å— (`tests/unit/README.md`)
- âœ… å®Œæ•´çš„ä½¿ç”¨æ–‡æ¡£ï¼ˆ~600 è¡Œï¼‰
  - ç›®å½•ç»“æ„
  - æµ‹è¯•è¦†ç›–æ¦‚è§ˆ
  - å¿«é€Ÿå¼€å§‹æŒ‡å—
  - æµ‹è¯•ç»Ÿè®¡è¡¨æ ¼
  - æµ‹è¯•æ–¹æ³•è®º
  - æµ‹è¯•æœ€ä½³å®è·µ
  - æ·»åŠ æ–°æµ‹è¯•æ•™ç¨‹
  - ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
  - æ•…éšœæ’æŸ¥æŒ‡å—
  - æµ‹è¯•ç›®æ ‡å’Œå¾…åŠ
  - è´¡çŒ®æŒ‡å—

**æ–‡ä»¶**: `tests/unit/README.md` (~600 è¡Œ)

#### å·¥ä½œæ€»ç»“ (`UNIT_TESTING_SUMMARY.md`)
- âœ… æœ¬æ–‡æ¡£ï¼šå·¥ä½œæ€»ç»“å’Œæˆæœç»Ÿè®¡

**æ–‡ä»¶**: `UNIT_TESTING_SUMMARY.md` (æœ¬æ–‡ä»¶)

---

## ğŸ“Š æˆæœç»Ÿè®¡

### æ–‡ä»¶æ¸…å•

**æ–°å¢æ–‡ä»¶ (8ä¸ª)**:
```
tests/unit/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ README.md                      # ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ test_event_bus.py              # EventBus æµ‹è¯•
â”œâ”€â”€ test_risk_manager.py           # RiskManager æµ‹è¯•
â”œâ”€â”€ test_scanner_config.py         # ScannerConfig æµ‹è¯•
â”œâ”€â”€ test_exposure_model.py         # ExposureModel æµ‹è¯•
â”œâ”€â”€ test_spread_calculator.py      # SpreadCalculator æµ‹è¯•
â””â”€â”€ run_all_tests.py               # æ‰¹é‡è¿è¡Œè„šæœ¬
```

**æ ¹ç›®å½•æ–‡æ¡£ (1ä¸ª)**:
```
UNIT_TESTING_SUMMARY.md            # æœ¬æ–‡æ¡£
```

### ä»£ç é‡ç»Ÿè®¡
- **æµ‹è¯•ä»£ç **: ~1,010 è¡Œ (5ä¸ªæµ‹è¯•æ–‡ä»¶)
- **æµ‹è¯•åŸºç¡€è®¾æ–½**: ~30 è¡Œ
- **æ–‡æ¡£**: ~600 è¡Œ
- **æ€»è®¡**: ~1,640+ è¡Œ

### æµ‹è¯•ç”¨ä¾‹ç»Ÿè®¡
- **EventBus**: 6ä¸ªæµ‹è¯•ç”¨ä¾‹
- **RiskManager**: 6ä¸ªæµ‹è¯•ç”¨ä¾‹
- **ScannerConfig**: 13ä¸ªæµ‹è¯•ç”¨ä¾‹
- **ExposureModel**: 12ä¸ªæµ‹è¯•ç”¨ä¾‹
- **SpreadCalculator**: 14ä¸ªæµ‹è¯•ç”¨ä¾‹
- **æ€»è®¡**: **51ä¸ªæµ‹è¯•ç”¨ä¾‹**

---

## ğŸ¯ è¾¾æˆçš„é‡Œç¨‹ç¢‘

æ ¹æ® DEVELOPMENT_ROADMAP.md:

âœ… **Milestone 3: ç”Ÿäº§å°±ç»ª - å•å…ƒæµ‹è¯•éƒ¨åˆ†**
- âœ… å•å…ƒæµ‹è¯•æ¡†æ¶å»ºç«‹
- âœ… æ ¸å¿ƒæ¨¡å—æµ‹è¯•è¦†ç›–ï¼ˆ5ä¸ªæ¨¡å—ï¼‰
- âœ… 51ä¸ªæµ‹è¯•ç”¨ä¾‹
- âœ… æµ‹è¯•è‡ªåŠ¨åŒ–è„šæœ¬
- âœ… å®Œæ•´çš„æµ‹è¯•æ–‡æ¡£

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### å¿«é€Ÿå¼€å§‹

```bash
# 1. è¿›å…¥æµ‹è¯•ç›®å½•
cd tests/unit

# 2. è¿è¡Œæ‰€æœ‰æµ‹è¯•
python run_all_tests.py

# 3. æˆ–ä½¿ç”¨ unittest discovery
python -m unittest discover tests/unit
```

### è¿è¡Œå•ä¸ªæµ‹è¯•

```bash
# EventBus æµ‹è¯•
python tests/unit/test_event_bus.py

# RiskManager æµ‹è¯•
python tests/unit/test_risk_manager.py

# ScannerConfig æµ‹è¯•
python tests/unit/test_scanner_config.py

# ExposureModel æµ‹è¯•
python tests/unit/test_exposure_model.py

# SpreadCalculator æµ‹è¯•
python tests/unit/test_spread_calculator.py
```

### ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š

```bash
# å®‰è£… coverage
pip install coverage

# è¿è¡Œæµ‹è¯•å¹¶æ”¶é›†è¦†ç›–ç‡
coverage run -m unittest discover tests/unit

# ç”ŸæˆæŠ¥å‘Š
coverage report

# ç”Ÿæˆ HTML æŠ¥å‘Š
coverage html
# æ‰“å¼€ htmlcov/index.html æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š
```

---

## ğŸ“ˆ æµ‹è¯•è¦†ç›–æ¦‚è§ˆ

### å·²è¦†ç›–æ¨¡å—

| Module | Test File | Test Cases | Focus |
|--------|-----------|------------|-------|
| EventBus | test_event_bus.py | 6 | äº‹ä»¶è®¢é˜…/å‘å¸ƒ/è¿‡æ»¤ |
| RiskManager | test_risk_manager.py | 6 | é£æ§é™åˆ¶/æ£€æŸ¥ |
| ScannerConfig | test_scanner_config.py | 13 | é…ç½®éªŒè¯/è¾¹ç•Œæƒ…å†µ |
| ExposureModel | test_exposure_model.py | 12 | æŒä»“/æ•å£/ç›ˆäºè®¡ç®— |
| SpreadCalculator | test_spread_calculator.py | 14 | ä»·å·®è®¡ç®—/ç›ˆåˆ©æ€§ |

### æµ‹è¯•ç±»å‹åˆ†å¸ƒ

```
åŠŸèƒ½æµ‹è¯•:  35ä¸ª (68%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
è¾¹ç•Œæµ‹è¯•:  10ä¸ª (20%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
é›†æˆæµ‹è¯•:   6ä¸ª (12%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
```

---

## ğŸ§ª æµ‹è¯•è´¨é‡æŒ‡æ ‡

### æµ‹è¯•æ–¹æ³•è®º

1. **AAAæ¨¡å¼** (Arrange-Act-Assert)
   - Arrange: å‡†å¤‡æµ‹è¯•æ•°æ®å’Œç¯å¢ƒ
   - Act: æ‰§è¡Œè¢«æµ‹è¯•çš„åŠŸèƒ½
   - Assert: éªŒè¯ç»“æœ

2. **æµ‹è¯•éš”ç¦»**
   - æ¯ä¸ªæµ‹è¯•ç‹¬ç«‹è¿è¡Œ
   - ä½¿ç”¨ `setUp()` å’Œ `tearDown()` ç®¡ç†ç”Ÿå‘½å‘¨æœŸ
   - æ— å…±äº«çŠ¶æ€

3. **æµ‹è¯•è¦†ç›–**
   - æ­£å¸¸è·¯å¾„ï¼ˆHappy Pathï¼‰
   - è¾¹ç•Œæƒ…å†µï¼ˆEdge Casesï¼‰
   - å¼‚å¸¸å¤„ç†ï¼ˆError Handlingï¼‰

### æµ‹è¯•å‘½åè§„èŒƒ

- æµ‹è¯•æ–‡ä»¶: `test_<module_name>.py`
- æµ‹è¯•ç±»: `Test<ClassName>`
- æµ‹è¯•æ–¹æ³•: `test_<feature_description>`

### æ–­è¨€ç±»å‹ä½¿ç”¨

- `assertEqual` / `assertNotEqual`: 38æ¬¡
- `assertTrue` / `assertFalse`: 12æ¬¡
- `assertGreater` / `assertLess`: 15æ¬¡
- `assertAlmostEqual`: 8æ¬¡
- `assertIn` / `assertNotIn`: 6æ¬¡
- `assertRaises`: 2æ¬¡

---

## ğŸ“ æµ‹è¯•ç¤ºä¾‹

### ç¤ºä¾‹1: åŸºæœ¬åŠŸèƒ½æµ‹è¯•

```python
def test_subscribe_and_publish(self):
    """æµ‹è¯•è®¢é˜…å’Œå‘å¸ƒåŸºæœ¬åŠŸèƒ½"""
    received_events = []

    def handler(event: MarketDataUpdate):
        received_events.append(event)

    # Arrange: è®¢é˜…
    self.event_bus.subscribe(MarketDataUpdate, handler)

    # Act: å‘å¸ƒäº‹ä»¶
    event = MarketDataUpdate(
        exchange="okx",
        symbol="BTC-USDT",
        bid=50000.0,
        ask=50001.0,
        timestamp=datetime.utcnow(),
    )
    self.event_bus.publish(event)

    # Assert: éªŒè¯
    self.assertEqual(len(received_events), 1)
    self.assertEqual(received_events[0], event)
```

### ç¤ºä¾‹2: è¾¹ç•Œæƒ…å†µæµ‹è¯•

```python
def test_zero_buy_price(self):
    """æµ‹è¯•é›¶ä¹°ä»·ï¼ˆé™¤ä»¥é›¶ï¼‰"""
    buy_price = 0.0
    sell_price = 50000.0

    # åº”è¯¥å¤„ç†é™¤ä»¥é›¶çš„æƒ…å†µ
    with self.assertRaises(ZeroDivisionError):
        self.calculator.calculate_spread_bps(buy_price, sell_price)
```

### ç¤ºä¾‹3: é›†æˆæµ‹è¯•

```python
def test_hedged_position(self):
    """æµ‹è¯•å¯¹å†²æŒä»“"""
    # åŒä¸€äº¤æ˜“å¯¹çš„å¤šç©ºå¯¹å†²
    long_position = PositionExposure(...)
    short_position = PositionExposure(...)

    # è®¡ç®—å‡€æ•å£
    net_size = long_position.size + short_position.size
    self.assertEqual(net_size, 0.0)  # å®Œå…¨å¯¹å†²

    # è®¡ç®—æ€»ç›ˆäº
    total_pnl = long_position.unrealized_pnl + short_position.unrealized_pnl
    self.assertEqual(total_pnl, 500.0)  # å¥—åˆ©åˆ©æ¶¦
```

---

## ğŸ¯ æµ‹è¯•ç›®æ ‡

### å½“å‰çŠ¶æ€
- âœ… æ ¸å¿ƒæ¨¡å—: 5ä¸ª
- âœ… æµ‹è¯•ç”¨ä¾‹: 51ä¸ª
- âœ… æµ‹è¯•ä»£ç : ~1,010 è¡Œ
- âœ… æµ‹è¯•æ–‡æ¡£: ~600 è¡Œ

### ä¸‹ä¸€æ­¥è®¡åˆ’

#### çŸ­æœŸ (1å‘¨å†…)
- [ ] æ·»åŠ  Execution Engine æµ‹è¯•
- [ ] æ·»åŠ  Position Aggregator æµ‹è¯•
- [ ] æ·»åŠ  Capital Orchestrator æµ‹è¯•
- [ ] è¿è¡Œè¦†ç›–ç‡åˆ†æï¼Œè¾¾åˆ° 70%+

#### ä¸­æœŸ (1ä¸ªæœˆå†…)
- [ ] è¦†ç›–æ‰€æœ‰æ ¸å¿ƒæ¨¡å—ï¼ˆ10+æ¨¡å—ï¼‰
- [ ] è¾¾åˆ° 80%+ ä»£ç è¦†ç›–ç‡
- [ ] é›†æˆåˆ° CI/CD æµæ°´çº¿
- [ ] æ·»åŠ é›†æˆæµ‹è¯•

#### é•¿æœŸ (3ä¸ªæœˆå†…)
- [ ] è¾¾åˆ° 90%+ ä»£ç è¦†ç›–ç‡
- [ ] æ·»åŠ ç«¯åˆ°ç«¯æµ‹è¯•
- [ ] æ€§èƒ½å›å½’æµ‹è¯•
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Š

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. æµ‹è¯•ç¼–å†™

- **å•ä¸€èŒè´£**: æ¯ä¸ªæµ‹è¯•åªéªŒè¯ä¸€ä¸ªåŠŸèƒ½ç‚¹
- **æ¸…æ™°å‘½å**: æµ‹è¯•åç§°åº”è¯¥æè¿°æµ‹è¯•çš„å†…å®¹
- **ç‹¬ç«‹è¿è¡Œ**: æµ‹è¯•ä¹‹é—´ä¸åº”è¯¥æœ‰ä¾èµ–å…³ç³»
- **å¿«é€Ÿæ‰§è¡Œ**: å•å…ƒæµ‹è¯•åº”è¯¥åœ¨å‡ æ¯«ç§’å†…å®Œæˆ

### 2. æµ‹è¯•ç»´æŠ¤

- **åŠæ—¶æ›´æ–°**: ä»£ç å˜æ›´æ—¶åŒæ­¥æ›´æ–°æµ‹è¯•
- **åˆ é™¤å†—ä½™**: ç§»é™¤è¿‡æ—¶æˆ–é‡å¤çš„æµ‹è¯•
- **é‡æ„æµ‹è¯•**: ä¿æŒæµ‹è¯•ä»£ç çš„å¯è¯»æ€§
- **æ–‡æ¡£åŒæ­¥**: æ›´æ–°æµ‹è¯•æ–‡æ¡£

### 3. æµ‹è¯•è¿è¡Œ

- **æœ¬åœ°éªŒè¯**: æäº¤å‰è¿è¡Œæ‰€æœ‰æµ‹è¯•
- **CIé›†æˆ**: æ¯æ¬¡æäº¤è‡ªåŠ¨è¿è¡Œæµ‹è¯•
- **è¦†ç›–ç‡ç›‘æ§**: å®šæœŸæ£€æŸ¥è¦†ç›–ç‡æŠ¥å‘Š
- **å›å½’æµ‹è¯•**: å‘å¸ƒå‰å®Œæ•´å›å½’æµ‹è¯•

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

1. **å¯¼å…¥é”™è¯¯**
   ```
   ModuleNotFoundError: No module named 'perpbot'
   ```
   **è§£å†³**: ç¡®ä¿ `sys.path.insert()` æ­£ç¡®æ·»åŠ 

2. **æ–­è¨€å¤±è´¥**
   ```
   AssertionError: 10 != 20
   ```
   **è§£å†³**: æ£€æŸ¥é¢„æœŸå€¼ï¼Œä½¿ç”¨ `print()` è°ƒè¯•

3. **æµ‹è¯•è¶…æ—¶**
   **è§£å†³**: ä½¿ç”¨ mock æ›¿ä»£è€—æ—¶æ“ä½œ

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [DEVELOPMENT_ROADMAP.md](../../DEVELOPMENT_ROADMAP.md) - é¡¹ç›®å¼€å‘è·¯çº¿å›¾
- [tests/performance/README.md](../performance/README.md) - æ€§èƒ½æµ‹è¯•æ–‡æ¡£
- [DEPLOYMENT.md](../../docs/DEPLOYMENT.md) - éƒ¨ç½²æŒ‡å—

---

## ğŸ“š æŠ€æœ¯æ ˆ

- **æµ‹è¯•æ¡†æ¶**: Python `unittest` (æ ‡å‡†åº“)
- **æ–­è¨€åº“**: `unittest.TestCase` assertions
- **è¦†ç›–ç‡**: `coverage.py` (å¯é€‰)
- **æ–‡æ¡£**: Markdown

---

## ğŸ”® åç»­ä¼˜åŒ–

### çŸ­æœŸ (1-2å‘¨)
- [ ] æ·»åŠ æ›´å¤šæ ¸å¿ƒæ¨¡å—æµ‹è¯•
  - Execution Engine
  - Position Aggregator
  - Capital Orchestrator
  - Health Monitor
  - WebSocket Manager
- [ ] é›†æˆ pytest (æ›´å¼ºå¤§çš„æµ‹è¯•æ¡†æ¶)
- [ ] æ·»åŠ  fixtures å’Œ parametrize æµ‹è¯•

### ä¸­æœŸ (1ä¸ªæœˆ)
- [ ] é›†æˆåˆ° CI/CD æµæ°´çº¿
  - GitHub Actions è‡ªåŠ¨è¿è¡Œ
  - Pull Request æµ‹è¯•é—¨ç¦
  - è¦†ç›–ç‡æŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆ
- [ ] æ·»åŠ é›†æˆæµ‹è¯•
  - å¤šæ¨¡å—ååŒæµ‹è¯•
  - ç«¯åˆ°ç«¯æµ‹è¯•åœºæ™¯
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•

### é•¿æœŸ (3ä¸ªæœˆ+)
- [ ] æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ° 90%+
- [ ] æ·»åŠ  mutation testing (å˜å¼‚æµ‹è¯•)
- [ ] è‡ªåŠ¨åŒ–å›å½’æµ‹è¯•
- [ ] æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨

---

## âœ… æ£€æŸ¥æ¸…å•

æµ‹è¯•ç¼–å†™å‰:
- [ ] é˜…è¯» `tests/unit/README.md`
- [ ] äº†è§£ AAA æµ‹è¯•æ¨¡å¼
- [ ] å‡†å¤‡æµ‹è¯•æ•°æ®å’Œé¢„æœŸç»“æœ
- [ ] ç¡®å®šæµ‹è¯•è¾¹ç•Œæƒ…å†µ

æµ‹è¯•ç¼–å†™å:
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆç»¿ç¯ï¼‰
- [ ] æµ‹è¯•åç§°æ¸…æ™°æè¿°åŠŸèƒ½
- [ ] æ·»åŠ å¿…è¦çš„æ³¨é‡Š
- [ ] æ›´æ–°æµ‹è¯•æ–‡æ¡£

æäº¤ä»£ç å‰:
- [ ] è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
- [ ] æ£€æŸ¥ä»£ç è¦†ç›–ç‡
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] Git commit message æè¿°æµ‹è¯•å†…å®¹

---

**ç»´æŠ¤è€…**: Claude Sonnet 4.5
**å®¡æ ¸è€…**: å¾…äººå·¥å®¡æ ¸
**çŠ¶æ€**: âœ… å®Œæˆ
