[program:perpbot]
command=/usr/bin/python3 -m src.perpbot.main
directory=/app
user=perpbot
autostart=true
autorestart=true
startretries=3
redirect_stderr=true
stdout_logfile=/app/logs/perpbot.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
stderr_logfile=/app/logs/perpbot_error.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=10
environment=PYTHONUNBUFFERED="1",ENVIRONMENT="production"
priority=10
stopwaitsecs=60
killasgroup=true
stopasgroup=true

[program:perpbot-web]
command=/usr/bin/python3 -m uvicorn src.perpbot.console.web.app:app --host 0.0.0.0 --port 8000
directory=/app
user=perpbot
autostart=true
autorestart=true
startretries=3
redirect_stderr=true
stdout_logfile=/app/logs/web.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
priority=20
stopwaitsecs=30

[group:perpbot-services]
programs=perpbot,perpbot-web
priority=999
