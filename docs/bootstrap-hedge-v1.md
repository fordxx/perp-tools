# ✅ Bootstrap 双交易所对冲系统设计定稿 v1.0

目标：
> 构建一个 ✅ 真实可运行 ✅ 真实下单 ✅ 真实成交 ✅ 可回滚 ✅ 可记录 PnL 的最小对冲系统。

---

## 一、系统唯一目标

在 OKX + Binance 上：

- 同时市价开多/空
- 同时市价平仓
- 系统全程可控、可熔断、可回滚

只验证三件事：

1. 真实 API 连接是否稳定
2. 双边下单是否同步
3. 双边平仓是否可控

---

## 二、禁止事项（Bootstrap 阶段铁律）

本阶段严禁：

- ❌ 多交易所
- ❌ 多策略
- ❌ Web 面板
- ❌ Maker 挂单
- ❌ 资金费率套利
- ❌ 调度评分系统
- ❌ S1/S2/S3 资金层

---

## 三、极简系统结构



src/bootstrap/
├── exchanges/
│   ├── base.py
│   ├── okx.py
│   └── binance.py
├── hedge_executor.py
├── risk.py
├── capital.py
└── run.py
config.bootstrap.yaml


---

## 四、执行逻辑（严格顺序）

1. 获取 OKX 价格
2. 获取 Binance 价格
3. 计算允许的最大滑点
4. 同时：
   - OKX 市价做多
   - Binance 市价做空
5. 监控成交：
   - 最大 time skew：800ms
6. 持仓等待 N 秒
7. 同时市价平仓
8. 汇总：
   - OKX PnL
   - Binance PnL
   - 合并 PnL
9. 写入 capital.py 记录
10. 若任何一步异常 → 立即 Kill + 强平

---

## 五、默认风险参数（第一阶段硬编码）

| 参数 | 默认 |
|------|------|
| 单笔名义 | 300 USDT |
| 杠杆 | 1x |
| 最大滑点 | 0.05% |
| 最大持仓 | 10 秒 |
| 最大亏损 | 0.2% |
| 单边未成交超时 | 800 ms |
| 单日最多次数 | 30 次 |

---

## 六、风险来源与应对

| 风险 | 对策 |
|------|------|
| 网络延迟 | 限制 time skew |
| 单边成交 | 回滚 + Kill |
| 滑点爆炸 | 强制最大滑点 |
| API 不稳定 | 熔断 |
| 行情剧烈波动 | 强制平仓 |

---

## 七、成功标准（必须全部满足）

✅ 能真实成交  
✅ 能真实平仓  
✅ 能看到资金变化  
✅ 不爆仓  
✅ 手动 Kill 立即生效  
✅ 任意异常可退出

---

## 八、完成后才允许的升级路线

1. 加入 Maker / Taker 智能执行
2. 加入手续费成本引擎
3. 加入三层资金模型
4. 加入多交易所调度
5. 加入刷量策略与资金费率套利

---

## 九、最终信条

> ✅ 先跑通 → 再优化  
> ❌ 不允许一次性堆叠复杂系统  
> ✅ 不允许用“理论正确”代替“实盘验证”
